<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Metis Bot</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="../../assets/css/newcamp.css" />
		<!-- jQuery -->
		<script
			src="https://code.jquery.com/jquery-3.3.1.js"
			integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60="
			crossorigin="anonymous"
		></script>
		<!-- JavaScript Bundle with Popper -->
		<script
			src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
			integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
			crossorigin="anonymous"
		></script>
		<script src="https://www.google.com/recaptcha/api.js" async defer></script>
	</head>

	<body>
		<div id="header"></div>

		<!--Connection Error Popup-->
		<div
			class="modal"
			tabindex="-1"
			data-bs-backdrop="static"
			data-bs-keyboard="false"
			aria-labelledby="campConnectionErrorModalLabel"
			aria-hidden="true"
			id="campConnectionErrorModal"
		>
			<div class="modal-dialog modal-dialog-centered">
				<div class="modal-content bg-dark text-white">
					<div class="modal-header">
						<h5 class="modal-title" id="campConnectionErrorModalLabel" style="font-weight: bold">
							Connection Error
						</h5>
					</div>
					<div class="modal-body">
						<p>
							There has been an error connecting to the server. If you want, you can contact a dev by
							clicking the button below. Error:
						</p>
						<p id="campConnectionErrorMessage"></p>
					</div>
					<div class="modal-footer">
						<button
							type="button"
							class="btn btn-primary text-white"
							onclick="window.open('https://discord.com/channels/897545470077980732/968929678423375952', '_blank')"
						>
							Contact a dev
						</button>
					</div>
				</div>
			</div>
		</div>

		<!--Remaining section-->
		<h1 class="display-5 fw-bold text-center">So you want to create a new Campaign?</h1>
		<h6 class="text-center" style="filter: brightness(0.8)" id="info">
			To create a new Campaign, please fill out this Form and send it. After submitting it your campaign should
			appear on the server.
		</h6>
		<div class="container" style="margin-top: 4rem">
			<form
				style="margin-bottom: 5rem"
				class="needs-validation"
				id="campaignForm"
				novalidate
				action="sendCampForm.php"
				method="POST"
			>
				<div class="card bg-dark" style="margin-bottom: 1rem">
					<div class="card-header">General Campaign Info</div>
					<div class="card-body">
						<div class="mb-3">
							<!-- Campaign Name -->
							<label for="campaignName" class="form-label">Campaign Name</label>
							<input
								type="text"
								class="form-control"
								id="campaignName"
								name="campaign_name"
								aria-describedby="campaignNameHelp"
								required
							/>
							<div id="campaignNameHelp" class="form-text">Please enter the name of your campaign.</div>
						</div>
						<!-- Language Selector -->
						<div class="mb-3">
							<label class="form-label">Language</label>
							<div id="language">
								<div class="form-check">
									<input
										class="form-check-input"
										type="radio"
										name="languageRadio"
										id="germanLang"
										value="de"
										checked
									/>
									<label class="form-check-label" for="germanLang"> Deutsch </label>
								</div>
								<div class="form-check">
									<input
										class="form-check-input"
										type="radio"
										name="languageRadio"
										id="englishLang"
										value="en"
									/>
									<label class="form-check-label" for="englishLang"> English </label>
								</div>
								<div class="btn-group" data-toggle="buttons" id="btn-group-id">
									<div class="form-check">
										<input
											class="form-check-input"
											type="radio"
											name="languageRadio"
											id="otherLang"
											value="ot"
										/>
									</div>
									<input
										type="text"
										name="other_language"
										placeholder="Other Language"
										id="otherLangInput"
										maxlength="200"
										style="
											color: white;
											border-color: grey;
											border-style: none none solid none;
											background-color: transparent;
											border-width: 1px;
										"
									/>
								</div>
							</div>
						</div>
						<!-- Campaign Description -->
						<div class="mb-3">
							<label for="cmpDesc" class="form-label">Campaign Description</label>
							<textarea
								class="form-control"
								id="cmpDesc"
								name="description"
								aria-describedby="cmpDescHelp"
								maxlength="1000"
								required
							></textarea>
							<div id="cmpDescHelp" class="form-text">Describe in short what your campaign is about</div>
						</div>

						<!-- Campaign Location -->
						<div class="mb-3">
							<label for="location" class="form-label">Where (online/irl & location)</label>
							<input
								type="text"
								class="form-control"
								name="location"
								id="location"
								aria-describedby="locationHelp"
								maxlength="200"
								required
							/>
							<div id="locationHelp" class="form-text">Where do your campaigns normally take place?</div>
						</div>

						<!-- Campaign Time -->
						<div class="mb-3">
							<label for="time" class="form-label">When (day/s & time)</label>
							<input
								type="text"
								class="form-control"
								name="time"
								id="time"
								aria-describedby="timeHelp"
								maxlength="200"
								required
							/>
							<div id="timeHelp" class="form-text">When do your campaigns normally take place?</div>
						</div>

						<!-- Max Players -->
						<div class="mb-3">
							<label for="maxPlayers" class="form-label">Maximum amount of Players</label>
							<input
								type="number"
								class="form-control"
								name="players_max"
								id="maxPlayers"
								aria-describedby="maxPlayersHelp"
								min="1"
								max="100"
								value="1"
								required
							/>
							<div id="maxPlayersHelp" class="form-text">Set how many players can join your campaign</div>
							<div class="invalid-feedback">Please enter a valid number between 1 and 100.</div>
						</div>
					</div>
				</div>
				<div class="card bg-dark" style="margin-bottom: 1rem">
					<div class="card-header">Additional Campaign Settings</div>
					<div class="card-body">
						<!-- Campaign Difficulty -->
						<div class="mb-3">
							<label class="form-label">Difficulty</label>

							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="diffucltyRadio"
									value="Beginner/Easy"
									id="beginnerDiff"
									checked
								/>
								<label class="form-check-label" for="beginnerDiff"> Beginner/Easy </label>
							</div>
							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="diffucltyRadio"
									value="Medium"
									id="mediumDiff"
								/>
								<label class="form-check-label" for="mediumDiff"> Medium </label>
							</div>
							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="diffucltyRadio"
									value="Expert/Difficult"
									id="hardDiff"
								/>
								<label class="form-check-label" for="hardDiff"> Expert/Difficult </label>
							</div>
						</div>

						<!-- Additional Notes -->
						<div class="mb-3">
							<label for="notes" class="form-label">Additional Notes</label>
							<textarea
								class="form-control"
								id="notes"
								name="notes"
								aria-describedby="notesHelp"
								maxlength="1000"
							></textarea>
							<div id="notesHelp" class="form-text">Write any additional notes here</div>
						</div>

						<!-- Campaign Icon -->
						<div class="mb-3">
							<label class="form-label">Campaign Icon</label>

							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="iconRadios"
									value="Dice"
									id="diceRadio"
									checked
								/>
								<label class="form-check-label" for="diceRadio"> Dice </label>
							</div>
							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="iconRadios"
									value="Swords"
									id="swordsRadio"
								/>
								<label class="form-check-label" for="swordsRadio"> Swords </label>
							</div>
							<div class="form-check">
								<input
									class="form-check-input"
									type="radio"
									name="iconRadios"
									value="Shield"
									id="shieldRadio"
								/>
								<label class="form-check-label" for="shieldRadio"> Shield </label>
							</div>
						</div>
					</div>
				</div>

				<div class="card bg-dark" style="margin-bottom: 1rem">
					<div class="card-header">DM Info</div>
					<div class="card-body">
						<!-- DM Name -->
						<div class="mb-3">
							<label for="dmName" class="form-label">Dungeon Master Name</label>
							<input
								type="text"
								class="form-control"
								name="dm_name"
								id="dmName"
								aria-describedby="dmNameHelp"
								maxlength="200"
								required
							/>
							<div id="dmNameHelp" class="form-text">
								This is the Name that will appear on the campaign Message
							</div>
						</div>

						<!-- Select Server	-->
						<div class="mb-3">
							<label for="dmServer" class="form-label">Select Server</label>
							<select
								class="form-select"
								id="dmServer"
								name="dmServer"
								aria-describedby="dmNameHelp"
								required
							>
								<option value="" selected disabled>Select Server</option>
								SeerverListOptions
							</select>
							<div id="serverhelp" class="form-text">
								Select the server you want to post the campaign on
							</div>
						</div>

						<!-- DM Discord Tag -->
						<div class="mb-3">
							<label for="dm_tag" class="form-label">Discord Tag</label>
							<div id="usercard">
								<img
									id="dmDiscordTagImg"
									src="discordAvatarSourceURL"
									alt="Discord Tag"
									style="width: 100%; max-width: 40px; position: relative; border-radius: 100%"
								/>
								<span id="dmDiscordTag">Discord#1234</span>
							</div>
						</div>
					</div>
				</div>
				<div class="g-recaptcha" data-sitekey="6Lf7jgMjAAAAAIwh8qf-Mz4SD4e8qmmGFcH1J65l"></div>
				<div id="recaptchaError"></div>
				<!-- recaptchaError -->
				<div class="mb-3" style="margin-top: 5px">
					<button type="submit" class="btn btn-primary text-white">Submit Form</button>
					<button
						type="button"
						class="btn btn-primary text-white"
						onclick="window.location.href = 'http://localhost:3000/src/logout.php';"
					>
						Logout
					</button>
				</div>
			</form>
		</div>
		<script>
			// Example starter JavaScript for disabling form submissions if there are invalid fields
			(() => {
				"use strict";

				// Fetch all the forms we want to apply custom Bootstrap validation styles to
				const forms = document.querySelectorAll(".needs-validation");

				// Loop over them and prevent submission
				Array.from(forms).forEach((form) => {
					form.addEventListener(
						"submit",
						(event) => {
							console.log(grecaptcha.getResponse());
							if (!form.checkValidity()) {
								event.preventDefault();
								event.stopPropagation();
							}
							if (grecaptcha.getResponse() == "") {
								event.preventDefault();
								event.stopPropagation();
								document.getElementById("recaptchaError").innerHTML =
									"<p class='text-danger'>Please complete the captcha</p>";
							} else {
								document.getElementById("recaptchaError").innerHTML = "";
							}
							form.classList.add("was-validated");
						},
						false
					);
				});
			})();
		</script>
	</body>
</html>
