<!DOCTYPE html>
<html lang="en">
<head>
    <title>Metis Bot</title>
    <meta charset="utf-8"/>
    <link rel="stylesheet" href="../assets/css/newcamp.css"/>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>

<body class="text-white">

<div class="container" style="margin-top: 4rem">
    <div>
        <h1 class="fw-bold" style="font-family: 'Montserrat', sans-serif;">
            <i class="fa-solid fa-pen"></i>
            Edit your campaign
            <i class="fa-solid fa-swords text-white"></i>
        </h1>
        <h5 class="mb-3" style="opacity: .7;">You made a mistake? No problem! You can easily edit your campaign
            here</h5>
    </div>
    <form style="margin-bottom: 5rem" class="needs-validation" id="editCampForm" novalidate action="sendEdit.php"
          method="POST">

        <div class="card bg-dark" style="margin-bottom: 1rem">
            <div class="card-header">General Campaign Info</div>
            <div class="card-body">
                <div class="mb-3">
                    <!-- Campaign Name -->
                    <label for="campaignName" class="form-label">Campaign Name</label>
                    <input
                            type="text"
                            class="form-control"
                            id="campaignName"
                            name="campaign_name"
                            aria-describedby="campaignNameHelp"
                            required
                            value="campaign_name"
                    />
                    <div id="campaignNameHelp" class="form-text">Please enter the name of your campaign.</div>
                </div>
                <!-- Language Section -->
                <div class="mb-3">
                    <label class="form-label">Language</label>
                    <input
                            class="form-control"
                            id="lang"
                            name="language"
                            aria-describedby="langHelpDesc"
                            maxlength="100"
                            required
                            value="language_name"
                    >
                    <div id="langHelpDesc" class="form-text">State the language / languages your campaign will be in
                    </div>
                </div>
                <!-- Campaign Description -->
                <div class="mb-3">
                    <label for="cmpDesc" class="form-label">Campaign Description</label>
                    <textarea
                            class="form-control"
                            id="cmpDesc"
                            name="description"
                            aria-describedby="cmpDescHelp"
                            maxlength="1000"
                            required
                    >campdescr</textarea>
                    <div id="cmpDescHelp" class="form-text">Describe in short what your campaign is about</div>
                </div>

                <!-- Campaign Location -->
                <div class="mb-3">
                    <label for="location" class="form-label">Where (online/irl & location)</label>
                    <input
                            type="text"
                            class="form-control"
                            name="location"
                            id="location"
                            aria-describedby="locationHelp"
                            maxlength="200"
                            value="camploc"
                            required
                    />
                    <div id="locationHelp" class="form-text">Where do your campaigns normally take place?</div>
                </div>

                <!-- Campaign Time -->
                <div class="mb-3">
                    <label for="time" class="form-label">When (day/s & time)</label>
                    <input
                            type="text"
                            class="form-control"
                            name="time"
                            id="time"
                            aria-describedby="timeHelp"
                            maxlength="200"
                            value="camptime"
                            required
                    />
                    <div id="timeHelp" class="form-text">When do your campaigns normally take place?</div>
                </div>

                <!-- Max Players -->
                <div class="mb-3">
                    <label for="maxPlayers" class="form-label">Maximum amount of Players</label>
                    <input
                            type="number"
                            class="form-control"
                            name="players_max"
                            id="maxPlayers"
                            aria-describedby="maxPlayersHelp"
                            min="1"
                            max="100"
                            value="mxplar"
                            required
                    />
                    <div id="maxPlayersHelp" class="form-text">Set how many players can join your campaign</div>
                    <div class="invalid-feedback">Please enter a valid number between 1 and 100.</div>
                </div>
            </div>
        </div>
        <div class="card bg-dark" style="margin-bottom: 1rem">
            <div class="card-header">Additional Campaign Settings</div>
            <div class="card-body">
                <!-- Campaign Difficulty -->
                <div class="mb-3">
                    <label class="form-label">Difficulty</label>

                    <div class="form-check">
                        <input
                                class="form-check-input"
                                type="radio"
                                name="diffucltyRadio"
                                value="Beginner/Easy"
                                id="beginnerDiff"
                                ez-checked
                        />
                        <label class="form-check-label" for="beginnerDiff"> Beginner/Easy </label>
                    </div>
                    <div class="form-check">
                        <input
                                class="form-check-input"
                                type="radio"
                                name="diffucltyRadio"
                                value="Medium"
                                id="mediumDiff"
                                med-checked
                        />
                        <label class="form-check-label" for="mediumDiff"> Medium </label>
                    </div>
                    <div class="form-check">
                        <input
                                class="form-check-input"
                                type="radio"
                                name="diffucltyRadio"
                                value="Expert/Difficult"
                                id="hardDiff"
                                hard-checked
                        />
                        <label class="form-check-label" for="hardDiff"> Expert/Difficult </label>
                    </div>
                </div>

                <!-- Additional Notes -->
                <div class="mb-3">
                    <label for="notes" class="form-label">Additional Notes</label>
                    <textarea
                            class="form-control"
                            id="notes"
                            name="notes"
                            aria-describedby="notesHelp"
                            maxlength="1000"
                    >campnotes</textarea>
                    <div id="notesHelp" class="form-text">Write any additional notes here</div>
                </div>
            </div>
        </div>

        <div class="card bg-dark" style="margin-bottom: 1rem">
            <div class="card-header">DM Info</div>
            <div class="card-body">
                <!-- DM Name -->
                <div class="mb-3">
                    <label for="dmName" class="form-label">Dungeon Master Name</label>
                    <input
                            type="text"
                            class="form-control"
                            name="dm_name"
                            id="dmName"
                            aria-describedby="dmNameHelp"
                            maxlength="200"
                            required
                            value="dmname"
                    />
                    <div id="dmNameHelp" class="form-text">
                        This is the Name that will appear on the campaign Message
                    </div>
                </div>

                <!-- Transfer DM status to another user -->
                <div class="mb-3">
                    <label for="new_dm_tag" class="form-label">Transfer DM status</label>
                    <input
                            type="text"
                            class="form-control"
                            name="new_dm_tag"
                            id="new_dm_tag"
                            aria-describedby="new_dm_tagHelp"
                            pattern="[a-zA-Z]+#\d\d\d\d"
                            maxlength="200"
                    />
                    <div id="new_dm_tagHelp" class="form-text">
                        Enter here the users Discord tag you want to tranfer the DM status to. Leave this empty
                        otherwise.
                    </div>
                    <div class="invalid-feedback">
                        The Discord Tag has to follow the pattern Username#XXXX e.g. Wumpus#1234
                    </div>
                </div>
            </div>
        </div>
        <div class="g-recaptcha" data-sitekey="6Lf7jgMjAAAAAIwh8qf-Mz4SD4e8qmmGFcH1J65l"></div>
        <div id="recaptchaError"></div>
        <div class="mb-3" style="margin-top: 5px">
            <button type="submit" class="btn btn-primary text-white" id="submitCampForm">Apply Changes</button>
            <a href="/src/profile.php" class="btn btn-primary text-white" id="cancelCampForm">Cancel</a>
        </div>
    </form>
</div>
<script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (() => {
        "use strict";

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        const forms = document.querySelectorAll(".needs-validation");

        // Loop over them and prevent submission
        Array.from(forms).forEach((form) => {
            form.addEventListener(
                "submit",
                (event) => {
                    console.log(grecaptcha.getResponse());
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    if (grecaptcha.getResponse() == "") {
                        event.preventDefault();
                        event.stopPropagation();
                        document.getElementById("recaptchaError").innerHTML =
                            "<p class='text-danger'>Please complete the captcha</p>";
                    } else {
                        document.getElementById("recaptchaError").innerHTML = "";
                    }
                    form.classList.add("was-validated");
                },
                false
            );
        });
    })();
</script>
</body>
</html>
